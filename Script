-- SERVICES
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- GUI SETUP
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ExclamationMarkGui"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = game.CoreGui

-- RE-ADD GUI AFTER RESPAWN
LocalPlayer.CharacterAdded:Connect(function()
    if not screenGui.Parent then
        screenGui.Parent = game.CoreGui
    end
end)

-- Main GUI Frame
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 400, 0, 300)
mainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
mainFrame.BackgroundColor3 = Color3.new(0, 0, 0)
mainFrame.BorderSizePixel = 0

-- Scrollable Button Container (Corrected)
local buttonScroll = Instance.new("ScrollingFrame", mainFrame)
buttonScroll.Size = UDim2.new(1, -20, 1, -60)
buttonScroll.Position = UDim2.new(0, 10, 0, 60)
buttonScroll.BackgroundTransparency = 1
buttonScroll.BorderSizePixel = 0
buttonScroll.ScrollBarThickness = 8
buttonScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
buttonScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
buttonScroll.ClipsDescendants = true

local buttonLayout = Instance.new("UIListLayout", buttonScroll)
buttonLayout.Padding = UDim.new(0, 10)
buttonLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- Rainbow Title
local rainbowLabel = Instance.new("TextLabel", mainFrame)
rainbowLabel.Size = UDim2.new(1, 0, 0, 50)
rainbowLabel.Position = UDim2.new(0, 0, 0, 0)
rainbowLabel.BackgroundTransparency = 1
rainbowLabel.Text = "ExclamationMark Gui V3.5"
rainbowLabel.Font = Enum.Font.SourceSansBold
rainbowLabel.TextSize = 28
rainbowLabel.TextStrokeTransparency = 0.7
rainbowLabel.TextColor3 = Color3.new(1, 0, 0)
spawn(function()
    local t = 0
    while true do
        t = t + 0.01
        rainbowLabel.TextColor3 = Color3.fromHSV(t % 1, 1, 1)
        wait(0.05)
    end
end)
-- Red Pulse Stroke
local pulseStroke = Instance.new("UIStroke", mainFrame)
pulseStroke.Thickness = 3
pulseStroke.Color = Color3.fromRGB(255, 0, 0)
pulseStroke.Transparency = 0.5
pulseStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

-- Pulse animation
spawn(function()
    local increasing = true
    while true do
        for i = 0, 1, 0.05 do
            pulseStroke.Transparency = increasing and i or 1 - i
            wait(0.05)
        end
        increasing = not increasing
    end
end)

-- Drag support for mainFrame
do
    local dragging, dragInput, dragStart, startPos
    local function update(input)
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
                                       startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
    mainFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1
        or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = mainFrame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    mainFrame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement
        or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    UIS.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)
end

-- ESP Button (center)
local espButton = Instance.new("TextButton", buttonScroll)
espButton.Size = UDim2.new(0, 100, 0, 40)
espButton.Position = UDim2.new(0.5, -50, 0.6, 0)
espButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
espButton.Text = "ESP"
espButton.TextColor3 = Color3.new(1, 1, 1)
espButton.Font = Enum.Font.SourceSansBold
espButton.TextSize = 24
espButton.BorderSizePixel = 0

-- Infinite Yield Button (right)
local infiniteYieldButton = Instance.new("TextButton", buttonScroll)
infiniteYieldButton.Size = UDim2.new(0, 100, 0, 40)
infiniteYieldButton.Position = UDim2.new(1, -110, 0.6, 0)
infiniteYieldButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
infiniteYieldButton.Text = "Infinite Yield"
infiniteYieldButton.TextColor3 = Color3.new(1, 1, 1)
infiniteYieldButton.Font = Enum.Font.SourceSansBold
infiniteYieldButton.TextSize = 20
infiniteYieldButton.BorderSizePixel = 0
infiniteYieldButton.MouseButton1Click:Connect(function()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
end)

-- Teleport Menu Button (left)
local teleportButton = Instance.new("TextButton", buttonScroll)
teleportButton.Size = UDim2.new(0, 100, 0, 40)
teleportButton.Position = UDim2.new(0, 10, 0.6, 0)
teleportButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
teleportButton.Text = "Teleport Menu"
teleportButton.TextColor3 = Color3.new(1, 1, 1)
teleportButton.Font = Enum.Font.SourceSansBold
teleportButton.TextSize = 20
teleportButton.BorderSizePixel = 0

-- Teleport Menu Logic
teleportButton.MouseButton1Click:Connect(function()
    local tg = Instance.new("ScreenGui", game.CoreGui)
    tg.Name = "TeleportMenuGui"
    tg.ResetOnSpawn = false
    tg.IgnoreGuiInset = true

    local tf = Instance.new("Frame", tg)
    tf.Size = UDim2.new(0, 250, 0, 300)
    tf.Position = UDim2.new(0.5, -125, 0.5, -150)
    tf.BackgroundColor3 = Color3.new(0, 0, 0)
    tf.BorderSizePixel = 0

    -- Title
    local title = Instance.new("TextLabel", tf)
    title.Size = UDim2.new(1, 0, 0, 40)
    title.BackgroundTransparency = 1
    title.Text = "Teleport Menu"
    title.Font = Enum.Font.SourceSansBold
    title.TextSize = 24
    title.TextColor3 = Color3.new(1, 0, 0)
    title.TextStrokeTransparency = 0.7

    -- Scroll list
    local sc = Instance.new("ScrollingFrame", tf)
    sc.Size = UDim2.new(1, 0, 1, -40)
    sc.Position = UDim2.new(0, 0, 0, 40)
    sc.BackgroundTransparency = 1
    sc.ScrollBarThickness = 8
    sc.AutomaticCanvasSize = Enum.AutomaticSize.Y
    sc.ClipsDescendants = true

    local layout = Instance.new("UIListLayout", sc)
    layout.Padding = UDim.new(0, 5)
    layout.SortOrder = Enum.SortOrder.Name

    local btns = {}
    local function makeBtn(plr)
        if plr == LocalPlayer or btns[plr] then return end
        local b = Instance.new("TextButton", sc)
        b.Size = UDim2.new(1, -10, 0, 40)
        b.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        b.Text = plr.Name
        b.TextColor3 = Color3.new(1, 1, 1)
        b.Font = Enum.Font.SourceSansBold
        b.TextSize = 18
        b.BorderSizePixel = 0
        b.MouseButton1Click:Connect(function()
            if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart")
            and LocalPlayer.Character and LocalPlayer.Character.PrimaryPart then
                LocalPlayer.Character:SetPrimaryPartCFrame(
                    plr.Character.HumanoidRootPart.CFrame
                )
            end
        end)
        btns[plr] = b
    end

    local function removeBtn(plr)
        if btns[plr] then
            btns[plr]:Destroy()
            btns[plr] = nil
        end
    end

    for _, plr in pairs(Players:GetPlayers()) do makeBtn(plr) end
    Players.PlayerAdded:Connect(makeBtn)
    Players.PlayerRemoving:Connect(removeBtn)

    -- Dragging for teleportFrame
    do
        local d, di, ds, sp
        local function up(inp)
            local dt = inp.Position - ds
            tf.Position = UDim2.new(sp.X.Scale, sp.X.Offset+dt.X,
                                    sp.Y.Scale, sp.Y.Offset+dt.Y)
        end
        tf.InputBegan:Connect(function(inp)
            if inp.UserInputType==Enum.UserInputType.MouseButton1
            or inp.UserInputType==Enum.UserInputType.Touch then
                d = true; ds = inp.Position; sp = tf.Position
                inp.Changed:Connect(function()
                    if inp.UserInputState==Enum.UserInputState.End then d=false end
                end)
            end
        end)
        tf.InputChanged:Connect(function(inp)
            if inp.UserInputType==Enum.UserInputType.MouseMovement
            or inp.UserInputType==Enum.UserInputType.Touch then di=inp end
        end)
        UIS.InputChanged:Connect(function(inp)
            if inp==di and d then up(inp) end
        end)
    end
end)

-- ESP Logic
local espOn = false
local function highlight(plr)
    if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart")
    and not plr.Character:FindFirstChild("ESPHighlight") then
        local h = Instance.new("Highlight", plr.Character)
        h.Adornee = plr.Character
        h.FillColor = Color3.fromRGB(255, 0, 0)
        h.OutlineColor = Color3.new(1,1,1)
        h.FillTransparency = 0.5
        h.OutlineTransparency = 0
        h.Name = "ESPHighlight"
    end
end

local function runESP()
    while espOn do
        for _, plr in pairs(Players:GetPlayers()) do
            if plr~=LocalPlayer then highlight(plr) end
        end
        wait(1)
    end
end

espButton.MouseButton1Click:Connect(function()
    espOn = not espOn
    espButton.Text = espOn and "ESP: ON" or "ESP"
    if espOn then
        runESP()
    end
end)

-- DEX Button (bottom left)
local dexButton = Instance.new("TextButton", buttonScroll)
dexButton.Size = UDim2.new(0, 100, 0, 40)
dexButton.Position = UDim2.new(0, 10, 1, -50)  -- Position it at the bottom left
dexButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
dexButton.Text = "DEX"
dexButton.TextColor3 = Color3.new(1, 1, 1)
dexButton.Font = Enum.Font.SourceSansBold
dexButton.TextSize = 20
dexButton.BorderSizePixel = 0
dexButton.MouseButton1Click:Connect(function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/memeenjoyer43/darkdex/refs/heads/main/script"))()
end)

-- Fling (Brookhaven Cars Version) Button (bottom right)
local flingButton = Instance.new("TextButton", buttonScroll)
flingButton.Size = UDim2.new(0, 180, 0, 40)
flingButton.Position = UDim2.new(1, -190, 1, -50)  -- bottom right corner
flingButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
flingButton.Text = "Fling (Brookhaven Cars Version)"
flingButton.TextColor3 = Color3.new(1, 1, 1)
flingButton.Font = Enum.Font.SourceSansBold
flingButton.TextSize = 16
flingButton.BorderSizePixel = 0

flingButton.MouseButton1Click:Connect(function()
    local root = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if root then
        local av = Instance.new("BodyAngularVelocity")
        av.AngularVelocity = Vector3.new(0, 9999, 0)
        av.MaxTorque = Vector3.new(0, math.huge, 0)
        av.P = 1250
        av.Name = "SpinForce"
        av.Parent = root

        task.delay(10, function()
            if av and av.Parent then
                av:Destroy()
            end
        end)
    else
        warn("Character or HumanoidRootPart not found.")
    end
end)

-- Fling (People Version) Button (bottom center)
local flingPeopleButton = Instance.new("TextButton", buttonScroll)
flingPeopleButton.Size = UDim2.new(0, 180, 0, 40)
flingPeopleButton.Position = UDim2.new(0.5, -90, 1, -50)  -- bottom center
flingPeopleButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
flingPeopleButton.Text = "Fling (People Version)"
flingPeopleButton.TextColor3 = Color3.new(1, 1, 1)
flingPeopleButton.Font = Enum.Font.SourceSansBold
flingPeopleButton.TextSize = 16
flingPeopleButton.BorderSizePixel = 0
flingPeopleButton.MouseButton1Click:Connect(function()
    local players = Players:GetPlayers()
    local others = {}
    for _, p in pairs(players) do
        if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
            table.insert(others, p)
        end
    end

    if #others > 0 and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local target = others[math.random(1, #others)]
        local root = LocalPlayer.Character.HumanoidRootPart
        local targetRoot = target.Character:FindFirstChild("HumanoidRootPart")

        if targetRoot then
            root.CFrame = targetRoot.CFrame + Vector3.new(0, 2, 0)

            local av = Instance.new("BodyAngularVelocity")
            av.AngularVelocity = Vector3.new(0, 99999, 0)
            av.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
            av.P = 3000
            av.Name = "SpinForce"
            av.Parent = root

            task.delay(15, function()
                if av and av.Parent then
                    av:Destroy()
                end
            end)
        end
    else
        warn("No valid target players found or character missing.")
    end
end)

local myuserButton = Instance.new("TextButton", buttonScroll)
myuserButton.Size = UDim2.new(0, 100, 0, 40)
myuserButton.Position = UDim2.new(0, 10, 1, -50)
myuserButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
myuserButton.Text = "My User"
myuserButton.TextColor3 = Color3.new(1, 1, 1)
myuserButton.Font = Enum.Font.SourceSansBold
myuserButton.TextSize = 20
myuserButton.BorderSizePixel = 0

-- Create ScreenGui for overlay
local screenGui = Instance.new("ScreenGui", game.Players.LocalPlayer:WaitForChild("PlayerGui"))
screenGui.ResetOnSpawn = false

-- Create overlay
local overlay = Instance.new("Frame", screenGui)
overlay.Size = UDim2.new(1, 0, 1, 0)
overlay.Position = UDim2.new(0, 0, 0, 0)
overlay.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
overlay.BackgroundTransparency = 0.5
overlay.Visible = false

-- Add text label
local overlayText = Instance.new("TextLabel", overlay)
overlayText.Size = UDim2.new(0.8, 0, 0.2, 0)
overlayText.Position = UDim2.new(0.1, 0, 0.4, 0)
overlayText.BackgroundTransparency = 1
overlayText.Text = "My User on discord is teamastralx, DM for suggestions on what to add to the gui. -Exclamation Mark"
overlayText.TextColor3 = Color3.new(1, 1, 1)
overlayText.TextWrapped = true
overlayText.TextScaled = true
overlayText.Font = Enum.Font.SourceSansBold

-- Button click event
myuserButton.MouseButton1Click:Connect(function()
	overlay.Visible = true
	task.delay(5, function()
		overlay.Visible = false
	end)
end)

local naButton = Instance.new("TextButton", buttonScroll)
naButton.Size = UDim2.new(0, 180, 0, 40)
naButton.Position = UDim2.new(1, -190, 1, -50)  -- bottom right corner
naButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
naButton.Text = "Nameless Admin"
naButton.TextColor3 = Color3.new(1, 1, 1)
naButton.Font = Enum.Font.SourceSansBold
naButton.TextSize = 16
naButton.BorderSizePixel = 0
naButton.MouseButton1Click:Connect(function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Nameless-admin-script-35641"))()
end)
local f3xButton = Instance.new("TextButton", buttonScroll)
f3xButton.Size = UDim2.new(0, 180, 0, 40)
f3xButton.Position = UDim2.new(1, -190, 1, -50)  -- bottom right corner
f3xButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
f3xButton.Text = "F3X (CLIENT)"
f3xButton.TextColor3 = Color3.new(1, 1, 1)
f3xButton.Font = Enum.Font.SourceSansBold
f3xButton.TextSize = 16
f3xButton.BorderSizePixel = 0
f3xButton.MouseButton1Click:Connect(function()
loadstring(game:GetObjects("rbxassetid://6695644299")[1].Source)()
end)
